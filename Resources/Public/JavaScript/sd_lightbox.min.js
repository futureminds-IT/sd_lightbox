(function(a){if(typeof define==="function"&&define.amd){define(["jquery","hammerjs"],a)}else{if(typeof exports==="object"){a(require("jquery"),require("hammerjs"))}else{a(jQuery,Hammer)}}}(function(b,a){function c(f,d){var e=b(f);if(!e.data("hammer")){e.data("hammer",new a(e[0],d))}}b.fn.hammer=function(d){return this.each(function(){c(this,d)})};a.Manager.prototype.emit=(function(d){return function(e,f){d.call(this,e,f);b(this.element).trigger({type:e,gesture:f})}})(a.Manager.prototype.emit)}));$(document).ready(function(){function e(o,p,q){i(o);k(p,q);m(p,q);a(o,p);l(o,p);$("#sd-lightbox").attr({"data-rel":o,"data-index":p,"data-length":q}).addClass("open");setTimeout(function(){$('#sd-lightbox-images img[data-index="'+p+'"]').addClass("active")},400);$("body").css("overflow","hidden")}function h(){var o=$("#sd-lightbox").attr("data-rel");var p=parseFloat($("#sd-lightbox").attr("data-index"))-1;var q=$("#sd-lightbox").attr("data-length");if(p>=1){$("#sd-lightbox").attr("data-index",p);k(p,q);m(p,q);a(o,p);f(p,"previous");setTimeout(function(){l(o,p)},400)}}function d(){var o=$("#sd-lightbox").attr("data-rel");var p=parseFloat($("#sd-lightbox").attr("data-index"))+1;var q=$("#sd-lightbox").attr("data-length");if(p<=q){$("#sd-lightbox").attr("data-index",p);k(p,q);m(p,q);a(o,p);f(p,"next");setTimeout(function(){l(o,p)},400)}}function b(){$("#sd-lightbox-images img").removeClass("active");j();$("#sd-lightbox").removeClass("open");$("#sd-lightbox-top, #sd-lightbox-previous, #sd-lightbox-next, #sd-lightbox-bottom").removeClass("idle");setTimeout(function(){$("#sd-lightbox-images img").remove();$("#sd-lightbox-counter").html("");$("#sd-lightbox-download").attr("href","#");$("#sd-lightbox-caption").html("")},400);$("body").attr("style","")}function g(){if($("#sd-lightbox")[0].requestFullScreen){if(document.fullScreen==false){$("#sd-lightbox")[0].requestFullscreen()}else{document.exitFullScreen()}}else{if($("#sd-lightbox")[0].mozRequestFullScreen){if(document.mozFullScreen==false){$("#sd-lightbox")[0].mozRequestFullScreen()}else{document.mozCancelFullScreen()}}else{if($("#sd-lightbox")[0].webkitRequestFullScreen){if(document.webkitIsFullScreen==false){$("#sd-lightbox")[0].webkitRequestFullScreen()}else{document.webkitCancelFullScreen()}}}}}function j(){if($("#sd-lightbox")[0].requestFullScreen){document.exitFullScreen()}else{if($("#sd-lightbox")[0].mozRequestFullScreen){document.mozCancelFullScreen()}else{if($("#sd-lightbox")[0].webkitRequestFullScreen){document.webkitCancelFullScreen()}}}$("#sd-lightbox-fullscreen").removeClass("fullscreen-open")}function i(o){$('.sd-lightbox[rel="'+o+'"]').each(function(q){var p=$(this).attr("href");var r=$(this).find("img").attr("title");if(r!=undefined){$("#sd-lightbox-images").append('<img title="'+r+'" data-index="'+parseFloat(q+1)+'" src="'+p+'" />')}else{$("#sd-lightbox-images").append('<img data-index="'+parseFloat(q+1)+'" src="'+p+'" />')}})}function k(o,p){$("#sd-lightbox-previous, #sd-lightbox-next").removeClass("disabled");if(o==1){$("#sd-lightbox-previous").addClass("disabled")}if(o==p){$("#sd-lightbox-next").addClass("disabled")}}function m(p,q){var o=p+" / "+q;$("#sd-lightbox-counter").html(o)}function a(o,q){var p=$('#sd-lightbox-images img[data-index="'+q+'"]').attr("src");$("#sd-lightbox-download").attr("href",p)}function l(o,q){var p=$('#sd-lightbox-images img[data-index="'+q+'"]').attr("title");if(p!=undefined){$("#sd-lightbox-caption").html(p)}}function f(o,p){if(p=="previous"){$('#sd-lightbox-images img[data-index="'+parseFloat(o+1)+'"]').addClass("previous");$("#sd-lightbox-bottom").addClass("idle");setTimeout(function(){$('#sd-lightbox-images img[data-index="'+parseFloat(o+1)+'"]').removeClass("active");$('#sd-lightbox-images img[data-index="'+o+'"]').addClass("active");$("#sd-lightbox-top, #sd-lightbox-previous, #sd-lightbox-next, #sd-lightbox-bottom").removeClass("idle")},400);setTimeout(function(){$('#sd-lightbox-images img[data-index="'+parseFloat(o+1)+'"]').removeClass("previous")},800)}else{if(p=="next"){$('#sd-lightbox-images img[data-index="'+parseFloat(o-1)+'"]').addClass("next");$("#sd-lightbox-bottom").addClass("idle");setTimeout(function(){$('#sd-lightbox-images img[data-index="'+parseFloat(o-1)+'"]').removeClass("active");$('#sd-lightbox-images img[data-index="'+o+'"]').addClass("active");$("#sd-lightbox-top, #sd-lightbox-previous, #sd-lightbox-next, #sd-lightbox-bottom").removeClass("idle")},400);setTimeout(function(){$('#sd-lightbox-images img[data-index="'+parseFloat(o-1)+'"]').removeClass("next")},800)}}}$(".sd-lightbox").on("click",function(r){r.preventDefault();var o=$(this).attr("rel");var p=$('.sd-lightbox[rel="'+o+'"]').index(this)+1;var q=$('.sd-lightbox[rel="'+o+'"]').length;e(o,p,q)});$("#sd-lightbox-previous").on("click",function(o){o.preventDefault();h()});$("#sd-lightbox-next").on("click",function(o){o.preventDefault();d()});$("#sd-lightbox-close, #sd-lightbox-overlay").on("click",function(o){o.preventDefault();b()});$("#sd-lightbox-fullscreen").on("click",function(o){o.preventDefault();$(this).toggleClass("fullscreen-open");g()});$("#sd-lightbox-images").on("click",function(){$("#sd-lightbox-top, #sd-lightbox-previous, #sd-lightbox-next, #sd-lightbox-bottom").toggleClass("idle")});$(document).keyup(function(o){if(o.keyCode==27||o.keyCode==38||o.keyCode==40){b()}else{if(o.keyCode==37){h()}else{if(o.keyCode==39){d()}}}});$("#sd-lightbox").hammer();$("#sd-lightbox").data("hammer").get("pan").set({pointers:1,threshold:0});var n;var c;$("#sd-lightbox").on("panstart",function(o){$("#sd-lightbox-images img.active").addClass("no-transition");n=$("#sd-lightbox-images img.active").css("-webkit-transform").split(/[()]/)[1];c=n.split(",")[4]});$("#sd-lightbox").on("panleft panright",function(r){var o=r.gesture.deltaX;var q=parseFloat(c)+parseFloat(o);var p=o/300;if(p<0){p=p*-1}$("#sd-lightbox-images img.active").css({"-webkit-transform":"translate("+q+"px, -50%) scale(1)",transform:"translate("+q+"px, -50%) scale(1)",opacity:1-p})});$("#sd-lightbox").on("panend",function(s){var o=s.gesture.deltaX;var r=s.gesture.velocityX;var p=$("#sd-lightbox").attr("data-index");var q=$("#sd-lightbox").attr("data-length");$("#sd-lightbox-images img.active").removeClass("no-transition");if(p==1){if(o<-100||r<-1){$("#sd-lightbox-images img.active").attr("style","");d()}else{$("#sd-lightbox-images img.active").attr("style","")}}else{if(p==q){if(o>100||r>1){$("#sd-lightbox-images img.active").attr("style","");h()}else{$("#sd-lightbox-images img.active").attr("style","")}}else{if(o>100||r>1){$("#sd-lightbox-images img.active").attr("style","");h()}else{if(o<-100||r<-1){$("#sd-lightbox-images img.active").attr("style","");d()}else{$("#sd-lightbox-images img.active").attr("style","")}}}}})});
